<div class="row">
  <h2 class="m-4 text-center col-12"> ENVIO DE MENSAJES</h2>
</div>
<div class="row justify-content-end">
  <form class="card col-md-8">
    <div class="card-header"> Envio de Mensajes-</div>
      <div class="card-body">
        <div class="row form-group">
          <label class="col-sm-12 col-md-4">Para</label>
          <input class="form-control col-sm-12 col-md-8" [(ngModel)]="mensaje.para" placeholder="Telefono destino" type="number" name="txtdesde" required/>
        </div>
        <div class="row form-group">
          <label class="col-sm-12 col-md-4" >Empresa</label>
          <select id="idempresa" class="form-control form-control-sm col-md-8"
          name="empresa" name="idempresa"
           [(ngModel)] = "mensaje.empresa" >
           <option *ngFor="let empresa of empresas" [ngValue]="empresa">{{empresa.nombre}}</option>
          </select>
        </div>
      <div class="row form-group">
        <label class="col-sm-12 col-md-4" >Desde</label>
        <input class="form-control col-sm-12 col-md-8" [(ngModel)]="mensaje.desde" placeholder="Escribe tu numero" type="number" name="txthasta" required/>
      </div>
      <div class="row form-group justify-content-between">
        <label>Tu mensaje</label>
        <label><small>({{caracteresRest}} Caracteres restantes)</small></label>
      </div>
      <div class="row form-group">
        <textarea class="form-control" [maxLength]="caracteresMax" rows="5" name="txtTexto" [(ngModel)]="mensaje.texto" (ngModelChange)="actualizarCaracteresRestantes()">  
        </textarea> 
      </div>
      <div class="row form-group justify-content-end">
        <button type="button" class="btn btn-secondary" (click)="limpiarFormulario()">Limpiar</button>     
        <button type="submit" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal" >Enviar!</button>       
      </div>
    </div>
  </form>
</div>
<!--MODAL-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Resumen del Mensaje</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="recipient-para" class="col-form-label">Para:</label>
            <input type="text" class="form-control" id="recipient-para" [value]="mensaje.para">
          </div>
          <div class="form-group">
            <label for="recipient-empresa" class="col-form-label">Empresa:</label>
            <input type="text" class="form-control" id="recipient-empresa" [value]="mensaje.empresa.nombre">
          </div>
          <div class="form-group">
            <label for="recipient-desde" class="col-form-label">Desde:</label>
            <input type="text" class="form-control" id="recipient-desde" [value]="mensaje.desde">
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label">Mensaje:</label>
            <textarea class="form-control" id="message-text" [value]="mensaje.texto"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="enviarMensaje()">Enviar Mensaje!</button>
      </div>
    </div>
  </div>
</div>